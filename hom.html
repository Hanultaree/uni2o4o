<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
  </head>
  <body>
    <h1>fetch example</h1>
    <h2> season </h2>
<ol>
  <li> <a href="#!spring" onclick="fetchPage('spring.txt')">spring </a> </li>
  <li> <a href="#!summer" onclick="fetchPage('https://jyl22ke.github.io/uni2o4o-1/spring1.txt')">summer </a> </li>
  <li> <a href="#!fall" onclick="reque(); fetchPage('https://t1.daumcdn.net/cafeattach/1CWC9/732426cf63b9cee635c9e75732cd90656577116f');">fall </a> </li>
  <li>winter</li>
</ol>
<p id="text"></p>
<script type="text/javascript">

function reque(){
  const xhr = new XMLHttpRequest();
  const url = 'https://t1.daumcdn.net/cafeattach/1CWC9/';

  xhr.open('GET', url);
  xhr.onreadystatechange = fetchPage(fileName);
//  xhr.onreadystatechange = someHandler;
  xhr.send();
};
  
  
function fetchPage(fileName){  
  fetch(fileName).then(function(response){
    response.text().then(function(text){
      document.querySelector('#text').innerHTML = text;
    })})};

// ■■■■■■■■  기본적인 fetch 코드의 경우  ■■■■■■■■ start
//기본적인 fetch 코드(출처 : mozilla)
/*
fetch('http://example.com/movies.json')
  .then(function(response) {
    return response.json();
  })
  .then(function(myJson) {
    console.log(JSON.stringify(myJson));
  });
기본적으로 fetch는 해당 url의 정보를 요청한다.
*/
// ■■■■■■■■  기본적인 fetch 코드의 경우  ■■■■■■■■ start
// ■■■■■■■■  method가 POST인 경우  ■■■■■■■■ start
// Example POST method implementation:
/*
postData('http://example.com/answer', {answer: 42})
  .then(data => console.log(JSON.stringify(data))) // JSON-string from `response.json()` call
  .catch(error => console.error(error));

function postData(url = '', data = {}) {
  // Default options are marked with *
    return fetch(url, {
        method: 'POST', // *GET, POST, PUT, DELETE, etc.
        mode: 'cors', // no-cors, cors, *same-origin
        cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
        credentials: 'same-origin', // include, *same-origin, omit
        headers: {
            'Content-Type': 'application/json',
            // 'Content-Type': 'application/x-www-form-urlencoded',
        },
        redirect: 'follow', // manual, *follow, error
        referrer: 'no-referrer', // no-referrer, *client
        body: JSON.stringify(data), // body data type must match "Content-Type" header
    })
    .then(response => response.json()); // parses JSON response into native JavaScript objects 
}
*/
// ■■■■■■■■  method가 POST인 경우  ■■■■■■■■ end











</script>
  </body>
</html>
